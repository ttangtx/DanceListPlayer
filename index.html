<!DOCTYPE html>
<html>
<head>

<title>Rose Mary Haggar Elementary PTA Beach Blast</title>
 <style>
 body{
	background-color:#008080;
 }
.videoWrapper {
	position: relative;
	padding-bottom: 40%; /* 16:9 */
	padding-top: 0px;
	height: 0;
}
.videoWrapper iframe {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}
.videoSelector {


}
.scrolling-wrapper {
  overflow-x: auto;
  overflow-y: hidden;
  white-space: nowrap;
  width:80%;
}

  .vdo {
    display: inline-block;
	white-space: normal;
  }
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
var videoList = {
/*title,src, start,finish*/
"Ev4KygTTYf4":["Fortnite Dances - Random 3 minutes","https://i.ytimg.com/vi/xWJqoQIzVoA/hqdefault.jpg?sqp=-oaymwEYCKgBEF5IVfKriqkDCwgBFQAAiEIYAXAB&rs=AOn4CLBd-DBYeegTszjjcu867ajPSgDu2g",0,0],
"72-1s_AhoWg" :[ "that POWER   Justin Bieber Ft  will i am   Just Dance 2014 Wii U","https://i.ytimg.com/vi/72-1s_AhoWg/hqdefault.jpg?sqp=-oaymwEYCKgBEF5IVfKriqkDCwgBFQAAiEIYAXAB&rs=AOn4CLCq4unudgNfIZZo3bsEf1C-nxMO6w",60,65],
"lXvoS3QQLC4" :[ "Just Dance Unlimited - HandClap","https://i.ytimg.com/vi/lXvoS3QQLC4/hqdefault.jpg?sqp=-oaymwEYCKgBEF5IVfKriqkDCwgBFQAAiEIYAXAB&rs=AOn4CLCOXAyxxND2cqswFxBuUJmdezGz0Q",60,65],
"YCDCwuGcEmA" :[ "Just Dance 2014 Y.M.C.A. by The Village People Music & Lyrics Video YMCA","https://i.ytimg.com/vi/YCDCwuGcEmA/hqdefault.jpg?sqp=-oaymwEYCKgBEF5IVfKriqkDCwgBFQAAiEIYAXAB&rs=AOn4CLAQ_hiMxkUEwmFmUyyVA1nBIGgt3w",60,65],
"qt4zIG7kUBc" :[ "Just Dance 2016 - Animals - 5 stars","https://i.ytimg.com/vi/qt4zIG7kUBc/hqdefault.jpg?sqp=-oaymwEYCKgBEF5IVfKriqkDCwgBFQAAiEIYAXAB&rs=AOn4CLDZh_rm00a0lISYTtRrH94IfDmZ0A",60,65]
};
var videoQue =[];

var videoAuto = ["Ev4KygTTYf4","qt4zIG7kUBc"];
function getRandomFromAuto(){
	var vdo = videoAuto[Math.floor(Math.random()*videoAuto.length)];
	return vdo;
}
function getVdobyId(id){
	var vdo = videoList[id];
	return vdo;
}
function addque(){
  var addID = $('#vdoselect').val();
  var pname = $('#pname').val();
  if(pname.length == 0){
	pname = "Everyone Dance!!";
  }
  var vd = [addID,pname];
  videoQue.push(vd);
  reloadQueDisplay();
}
function addquefromcontroller(vdoobj){
  
  videoQue.push(vdoobj);
  reloadQueDisplay();
}
function reloadQueDisplay(){
	$('#vdotmb').empty();
	$.each(videoQue, function(i, p) {
	    var vdoObj = getVdobyId(p[0]);
		$('#vdotmb').append('<div class="vdo"><img align="middle" src="'+vdoObj[1]+'" alt="'+vdoObj[0]+'" width="120"><div style="padding-top:30px;max-width:200px;float:left;font-family:arial;font-size:12px"><b>'+p[1]+'</b><br>'+vdoObj[0]+'</div></div>');
		
	});
}
function queNextVideo(){
 var nextmsg = "Next up .... ";
 if(Object.keys(videoQue).length > 0){
	var nextobj = videoQue[0];
	nextmsg = nextmsg + "  "+nextobj[1];
 }else{
	nextmsg = nextmsg + "  random dance";
 }
 $('#nextupmsg').empty();
 $('#nextupmsg').append(nextmsg);
 $('#countdown').attr('src', "count10.gif");
 $('#mainplayer').hide();
setTimeout(function(){ sloadvideo(); }, 10000);
}
function sloadvideo(){
   //get info from array
   $('#countdown').attr('src', "blank.gif");
   
 $('#mainplayer').show();
   var vdoId = getRandomFromAuto();
   var pname = "Everyone Dance!!";
   if(Object.keys(videoQue).length > 0){
      var v = videoQue.shift();
	  vdoId = v[0];
	  pname = v[1];
   }
   ;
	var vdoInfo = videoList[vdoId];
	
	var vdoTmb = vdoInfo[1];
	var vdoStart = vdoInfo[2];
	var vdoEnd = vdoInfo[3];
	if(vdoId == "Ev4KygTTYf4"){
		vdoStart = Math.floor(Math.random()*2020);
		vdoEnd = vdoStart+5; //5 secs for testing
	}
	var videoURL = "https://www.youtube.com/embed/"+vdoId+"?start="+vdoStart+"&end="+vdoEnd+"&autoplay=1&playsinline=0";
	// count down - video time + 5. flash message 10 seconds, go to next on the que, if que is empty, have a random select list.
	$('#mainplayer').attr('src', videoURL);
	reloadQueDisplay();
	//wait and play next
	var waittime = ((vdoEnd-vdoStart) * 1000) + 2000;
	setTimeout(function(){ queNextVideo(); }, waittime);
}

	var OpenWindow = null;
$(document).ready(function(){
 $('#vdoselect').empty();
	$.each(videoList, function(i, p) {
		$('#vdoselect').append($('<option></option>').val(i).html(p[0]));
	});
OpenWindow = window.open('thumbnail.html','_blank','width=335,height=600,scrollbars=1,resizable=1');
});

</script>
</head>
<body>

<center><div id="nextupmsg"></div><br><img id="countdown" src='blank.gif'></center>
<div class="videoWrapper" id="videowin">
    <iframe id="mainplayer" width="560" height="349" src="https://www.youtube.com/embed/oOIqEiUIcDQ?start=65&end=70&autoplay=1&playsinline=0" frameborder="0" allowfullscreen allow="autoplay"></iframe>
</div>
<br>

<a href="javascript:void(0)" onClick="sloadvideo();">load</a><div id="vdotmb" class="scrolling-wrapper"></div><br>

<p>
<div class="videoSelector" style="float:left">
<select id="vdoselect"></select><input id="pname" type="text" placeholder="Dancer Names"></input>
<a href="javascript:void(0)" onClick="addque();">Load to List</a>

</div>
</p>
</body>
</html>